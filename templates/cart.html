{% extends 'layout.html' %} {% block title %}Your Cart{% endblock %} {% block
content %}
<h1>Your Cart</h1>

{% if cart %}
<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Gender</th>
      <th>Color</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in cart %}
    <tr>
      <td>{{ item.name }}</td>
      <td>{{ item.gender }}</td>
      <td>{{ item.color }}</td>
      <td>#{{ item.price }}</td>
      <td>{{ item.quantity }}</td>
      <td>#{{ item.price * item.quantity }}</td>
      <td>
        <form
          action="{{ url_for('products.update_cart', name=item.name) }}"
          method="POST"
        >
          <input
            type="number"
            name="quantity"
            value="{{ item.quantity }}"
            min="1"
          />
          <button type="submit">Update</button>
        </form>
        <form
          action="{{ url_for('products.remove_from_cart', name=item.name) }}"
          method="POST"
        >
          <button type="submit">Remove</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<!-- <p><strong>Total Price:</strong> #{{ cart | sum(attribute='price') }}</p> -->
<h4>Total Price: {{total_price}}</h4>
<form action="{{url_for('products.checkout')}}" method="post">
  <button type="submit">Checkout</button>
</form>
{% else %}
<p>Your cart is empty.</p>
{% endif %}

<a href="{{ url_for('products.show_products') }}">Continue Shopping</a>
{% endblock %}
